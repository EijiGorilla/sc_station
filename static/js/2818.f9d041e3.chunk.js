"use strict";(self.webpackChunksc_station=self.webpackChunksc_station||[]).push([[2818],{7137:(t,e,n)=>{n.d(e,{Ow:()=>y,TT:()=>f,Xn:()=>M,Zj:()=>_,_3:()=>m,l1:()=>v,qy:()=>g,vN:()=>E});n(35238);var i=n(50076),r=n(31633),s=n(40565),o=n(63885),a=n(80963),c=n(13312),l=n(23701),u=n(65215);n(19247);function h(t){if(!t)return null;const e=t.wkid;if(e)return o.uw[e];const n=t.wkt2??t.wkt;return n?function(t){const e=o._f.exec(t);if(!e||2!==e.length)return null;const n=e[1].split(",");if(!n||n.length<3)return null;const i=parseFloat(n[1]),r=parseFloat(n[2]);return isNaN(i)||isNaN(r)?null:{a:i,f:0===r?0:1/r}}(n):null}function d(t){const e=h(t);if(function(t){return null!=t&&"b"in t&&"eSq"in t&&"radius"in t}(e))return e;const n=e.a*(1-e.f);return Object.assign(e,{b:n,eSq:1-(n/e.a)**2,radius:(2*e.a+n)/3,densificationRatio:1e4/((2*e.a+n)/3)})}function p(t,e,n){const{a:i,eSq:r}=d(n),s=Math.sqrt(r),a=Math.sin(e[1]*o.eh),c=i*e[0]*o.eh;let l;return l=r>0?i*((1-r)*(a/(1-r*(a*a))-1/(2*s)*Math.log((1-s*a)/(1+s*a))))*.5:i*a,t[0]=c,t[1]=l,t}function f(t){return(0,a.EA)(t)&&!!h(t)}function g(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"square-meters";if(t.some((t=>!f(t.spatialReference))))throw new i.A("geodesic-areas:invalid-spatial-reference","the input geometries spatial reference is not supported");const n=[];for(let i=0;i<t.length;i++){const e=t[i],r=e.spatialReference,{radius:s,densificationRatio:o}=d(r),a=s*o;n.push(y(e,a))}const s=[],o=[0,0],a=[0,0];for(let i=0;i<n.length;i++){const{rings:t,spatialReference:c}=n[i];let l=0;for(let e=0;e<t.length;e++){const n=t[e];p(o,n[0],c),p(a,n[n.length-1],c);let i=a[0]*o[1]-o[0]*a[1];for(let t=0;t<n.length-1;t++)p(o,n[t+1],c),p(a,n[t],c),i+=a[0]*o[1]-o[0]*a[1];l+=i}l=(0,r.oU)(l,"square-meters",e),s.push(l/-2)}return s}function v(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"meters";if(!t)throw new i.A("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(t.some((t=>!f(t.spatialReference))))throw new i.A("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");const n=[];for(let i=0;i<t.length;i++){const s=t[i],{spatialReference:o}=s,a="polyline"===s.type?s.paths:s.rings;let c=0;for(let t=0;t<a.length;t++){const e=a[t];let n=0;for(let t=1;t<e.length;t++){const i=e[t-1][0],r=e[t][0],s=e[t-1][1],a=e[t][1];if(s!==a||i!==r){const t=new _;m(t,[i,s],[r,a],o),n+=t.distance}}c+=n}c=(0,r.oU)(c,"meters",e),n.push(c)}return n}function y(t,e){if("polyline"!==t.type&&"polygon"!==t.type)throw new i.A("geodesic-densify:invalid-geometry","the input geometry is neither polyline nor polygon");const{spatialReference:n}=t;if(!f(n))throw new i.A("geodesic-densify:invalid-spatial-reference","the input geometry spatial reference is not supported");const r="polyline"===t.type?t.paths:t.rings,o=[],a=[0,0],h=new _;for(const i of r){const t=[];o.push(t),t.push([i[0][0],i[0][1]]);let r,s,c=i[0][0],l=i[0][1];for(let o=0;o<i.length-1;o++){if(r=i[o+1][0],s=i[o+1][1],c===r&&l===s)continue;const u=[c,l];m(h,[c,l],[r,s],n);const{azimuth:d,distance:p}=h,f=p/e;if(f>1){for(let i=1;i<=f-1;i++)E(a,u,d,i*e,n),t.push(a.slice());E(a,u,d,(p+Math.floor(f-1)*e)/2,n),t.push(a.slice())}E(a,u,d,p,n),t.push(a.slice()),c=a[0],l=a[1]}}const d=(0,s.PZ)(c.A,n);return"polyline"===t.type?new l.A({paths:o,spatialReference:d}):new u.A({rings:o,spatialReference:d})}class _{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.distance=t,this.azimuth=e,this.reverseAzimuth=n}}function E(t,e,n,i,r){const s=e[0],a=e[1],c=s*o.eh,l=a*o.eh,u=(n??0)*o.eh,{a:h,b:p,f:f}=d(r),g=Math.sin(u),v=Math.cos(u),y=(1-f)*Math.tan(l),_=1/Math.sqrt(1+y*y),E=y*_,m=Math.atan2(y,v),M=_*g,w=M*M,S=1-w,b=S*(h*h-p*p)/(p*p),L=1+b/16384*(4096+b*(b*(320-175*b)-768)),N=b/1024*(256+b*(b*(74-47*b)-128));let T,A,R,x,P=i/(p*L),Z=2*Math.PI;for(;Math.abs(P-Z)>1e-12;)R=Math.cos(2*m+P),T=Math.sin(P),A=Math.cos(P),x=N*T*(R+N/4*(A*(2*R*R-1)-N/6*R*(4*T*T-3)*(4*R*R-3))),Z=P,P=i/(p*L)+x;const C=E*T-_*A*v,z=Math.atan2(E*A+_*T*v,(1-f)*Math.sqrt(w+C*C)),j=Math.atan2(T*g,_*A-E*T*v),k=f/16*S*(4+f*(4-3*S)),H=z/o.eh,I=(c+(j-(1-k)*f*M*(P+k*T*(R+k*A*(2*R*R-1)))))/o.eh;return t[0]=I,t[1]=H,t}function m(t,e,n,i){const r=e[0]*o.eh,s=e[1]*o.eh,a=n[0]*o.eh,c=n[1]*o.eh,{a:l,b:u,f:h,radius:p}=d(i),f=a-r,g=Math.atan((1-h)*Math.tan(s)),v=Math.atan((1-h)*Math.tan(c)),y=Math.sin(g),_=Math.cos(g),E=Math.sin(v),m=Math.cos(v);let M,w,S,b,L,N,T,A,R,x,P=1e3,Z=f;do{if(T=Math.sin(Z),A=Math.cos(Z),S=Math.sqrt(m*T*(m*T)+(_*E-y*m*A)*(_*E-y*m*A)),0===S)return t.distance=0,t.azimuth=void 0,t.reverseAzimuth=void 0,t;L=y*E+_*m*A,N=Math.atan2(S,L),R=_*m*T/S,w=1-R*R,b=L-2*y*E/w,isNaN(b)&&(b=0),x=h/16*w*(4+h*(4-3*w)),M=Z,Z=f+(1-x)*h*R*(N+x*S*(b+x*L*(2*b*b-1)))}while(Math.abs(Z-M)>1e-12&&--P>0);if(0===P){const e=p,n=Math.acos(Math.sin(s)*Math.sin(c)+Math.cos(s)*Math.cos(c)*Math.cos(a-r))*e,i=a-r,l=Math.sin(i)*Math.cos(c),u=Math.cos(s)*Math.sin(c)-Math.sin(s)*Math.cos(c)*Math.cos(i),h=Math.atan2(l,u);return t.azimuth=h/o.eh,t.distance=n,t.reverseAzimuth=void 0,t}const C=w*(l*l-u*u)/(u*u),z=C/1024*(256+C*(C*(74-47*C)-128)),j=u*(1+C/16384*(4096+C*(C*(320-175*C)-768)))*(N-z*S*(b+z/4*(L*(2*b*b-1)-z/6*b*(4*S*S-3)*(4*b*b-3)))),k=Math.atan2(m*Math.sin(Z),_*E-y*m*Math.cos(Z)),H=Math.atan2(_*Math.sin(Z),_*E*Math.cos(Z)-y*m);return t.azimuth=k/o.eh,t.distance=j,t.reverseAzimuth=H/o.eh,t}function M(t){return f(t)?t:(0,a.K8)(t)?c.A.WGS84:null}},4244:(t,e,n)=>{n.d(e,{Q:()=>c,X:()=>l});var i=n(76931),r=n(19555),s=n(20664),o=n(9392),a=n(12482);function c(t,e,n,i){n.projectToRenderScreen(t,h),n.projectToRenderScreen(e,d),(0,r.Re)(i,d,h),(0,r.S8)(i,i)}function l(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:(0,o.vt)();const c=(0,s.c)(u,t);return c[2]=(0,a.xS)(i,c,e,n)||0,i.renderCoordsHelper.toRenderCoords(c,e,r),r}const u=(0,o.vt)(),h=(0,i.QG)(),d=(0,i.QG)()},82307:(t,e,n)=>{n.d(e,{NE:()=>c,TU:()=>h,ac:()=>u,fn:()=>l,oe:()=>d});var i=n(18690),r=n(54901),s=n(87663),o=n(57308),a=n(41036);const c={redo:"r",undo:"z",center:"Alt",constraint:"Shift",cancel:"Escape",delete:["Backspace","Delete"],complete:"Enter",vertexAdd:"f",pan:" "},l={toggle:"Control"},u={enterInputMode:"Tab",commit:"Enter",discard:"Escape",next:"Tab"},h={moveUp:{key:"ArrowUp",modifier:"Shift",repeats:!0},moveDown:{key:"ArrowDown",modifier:"Shift",repeats:!0},moveLeft:{key:"ArrowLeft",modifier:"Shift",repeats:!0},moveRight:{key:"ArrowRight",modifier:"Shift",repeats:!0},scaleUp:{key:"+",modifier:"Shift"},scaleDown:{key:"-",modifier:"Shift"},factorModifier:{key:a.i,continuePropagation:!0},toggleOpacity:"t",preserveAspectRatio:{key:"Shift",continuePropagation:!0},rotateIncrements:{key:"Shift",continuePropagation:!0},undo:"z",redo:"r"};class d{constructor(){this._bindings=new Map}add(t,e){return this.addToggle(t,(t=>{"key-down"===t.type&&e(t)}))}addToggle(t,e){const n=p.fromDefinition(t,e),o=(0,s.tE)(this._bindings,n.key,(()=>[]));return o.push(n),(0,r.hA)((()=>(0,i.TF)(o,n)))}register(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.o.WIDGET;return(0,r.vE)([t.on("key-down",(e=>this.dispatch(t.inputManager,e)),e),t.on("key-up",(e=>this.dispatch(t.inputManager,e)),e)])}dispatch(t,e){const n=e.key,i=this._bindings.get(n);if(i)for(const r of i)r.process(t,e)}}class p{constructor(t,e,n,i,r){this.key=t,this.modifiers=e,this.repeats=n,this.continuePropagation=i,this.callback=r}process(t,e){if(!(e.key!==this.key||"repeat"in e&&e.repeat&&!this.repeats)){for(const e of this.modifiers)if(!t.isModifierKeyDown(e))return;this.continuePropagation||e.stopPropagation(),this.callback(e)}}static fromDefinition(t,e){if("string"==typeof t)return new p(t,[],!1,!1,e);const{key:n,modifier:i,repeats:r,continuePropagation:s}=t;return new p(n,i?Array.isArray(i)?i:[i]:[],!!r,!!s,e)}}},75543:(t,e,n)=>{n.d(e,{FX:()=>H,Mn:()=>w,QT:()=>q,WG:()=>I,ej:()=>L,en:()=>O,fT:()=>st,i7:()=>m,jf:()=>D,qR:()=>x,xW:()=>it});var i=n(18690),r=n(15941),s=n(19555),o=n(72745),a=n(20664),c=n(9392),l=n(43047),u=n(55855),h=n(63885),d=n(7137),p=n(13927),f=n(78315),g=n(94966),v=n(23862),y=n(79337),_=n(74050);class E{intersect(t){return B(this,t)}closestPoints(t){return[this.closestTo(t)]}}class m extends E{constructor(t){super(),this.point=t}equals(t){return this===t||st(t)&&(0,a.p)(this.point,t.point)}closestTo(){return(0,v.o8)(this.point)}}class M extends E{constructor(t,e,n){super(),this.start=t,this.end=e,this.lineLike={start:t,end:e,type:n}}equals(t){return this===t||ot(t)&&this.lineLike.type===t.lineLike.type&&(0,a.p)(this.start,t.start)&&(0,a.p)(this.end,t.end)}closestTo(t){const e=(0,v.Hh)();return(0,y.Yv)(t,this.lineLike,e),e}}class w extends M{constructor(t,e){super(t,e,_.Vv.LINE)}}class S extends M{constructor(t,e){super(t,e,_.Vv.RAY)}}class b extends E{constructor(t){super(),this.constraints=t}equals(t){return this===t||rt(t)&&(0,i.aI)(this.constraints,t.constraints,((t,e)=>t.equals(e)))}closestTo(t){let e,n=1/0;for(const i of this.constraints){const r=i.closestTo(t),s=(0,a.s)(t,r);s<n&&(n=s,e=r)}return(0,v.o8)(e??t)}closestPoints(t){return this.constraints.flatMap((e=>e===this?[]:e.closestPoints(t)))}}class L extends E{constructor(t,e){super(),this.center=t,this.radius=e}equals(t){return this===t||lt(t)&&this.center[0]===t.center[0]&&this.center[1]===t.center[1]&&this.radius===t.radius}closestTo(t){const e=(0,v.Hh)();return(0,y.Nm)(t,this.center,this.radius,e),e}}class N extends E{constructor(t,e){super(),this.center=t,this.radius=e}equals(t){return this===t||ut(t)&&(0,a.p)(this.center,t.center)&&this.radius===t.radius}closestTo(t){const e=(0,v.Hh)();return(0,y.Nm)(t,this.center,this.radius,e),e[2]=this.center[2],e}asCircle(){return new T((0,v.o8)(this.center),this.radius,(0,v.fA)(0,0,1))}}class T extends E{constructor(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;super(),this.center=t,this.radius=e,this.normal=n,this.slicePlane=i}equals(t){return this===t||ht(t)&&(0,a.p)(this.center,t.center)&&(0,a.p)(this.normal,t.normal)&&this.radius===t.radius}closestTo(t){const{center:e,radius:n}=this;(0,p._I)(this.getPlane(R),t,A);const i=(0,a.a)(A,A,e),r=(0,a.k)(i);if((0,y.Zj)(r,0))return(0,v.o8)(t);const s=n/Math.sqrt(r),o=(0,v.Hh)();(0,a.b)(o,e,i,s);const{slicePlane:c}=this;if(c&&!(0,y.F2)(c,o)){const e=U(c,this);return e?.closestTo(t)??(0,v.o8)(t)}return o}getPlane(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.vt)();return(0,p.O_)(this.center,this.normal,t)}}const A=(0,c.vt)(),R=(0,p.vt)();class x extends E{constructor(t){super(),this.z=t}equals(t){return this===t||at(t)&&this.z===t.z}closestTo(t){return(0,v.fA)(t[0],t[1],this.z)}getPlane(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.vt)();return(0,a.i)(P,0,0,this.z),(0,p.O_)(P,c.Cb,t)}}const P=(0,c.vt)();class Z extends E{constructor(t,e,n){super(),this.start=t,this.end=e,this.planeLike={start:(0,v.Xz)(t),end:(0,v.Xz)(e),type:n}}equals(t){return this===t||ct(t)&&this.planeLike.type===t.planeLike.type&&(0,a.p)(this.start,t.start)&&(0,a.p)(this.end,t.end)}closestTo(t){const e=(0,v.Hh)();return(0,y.r2)(t,this.planeLike,e),e}closestEndTo(t){const{start:e,end:n}=this.planeLike;return Math.sign((0,s.Om)((0,s.Re)(C,n,e),(0,s.Re)(z,(0,v.Xz)(t),e)))>0?this.end:this.start}getPlane(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.vt)();const e=(0,a.c)(j,this.end);return e[2]+=1,(0,p.Cr)(this.start,this.end,e,t)}getSlicePlane(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,p.vt)();const{start:e,end:n,type:i}=this.planeLike;if(i===y.pJ.PLANE)return;const r=(0,a.i)(j,e[0],e[1],0),s=(0,a.i)(k,n[0],n[1],0),o=(0,a.d)(k,s,r);return(0,p.O_)(r,o,t),t}}const C=(0,o.vt)(),z=(0,o.vt)(),j=(0,c.vt)(),k=(0,c.vt)();class H extends Z{constructor(t,e){super(t,e,y.pJ.HALF_PLANE)}}class I extends Z{constructor(t,e){super(t,e,y.pJ.PLANE)}}class F extends E{constructor(t,e){super(),this.sphere=(0,f.l)(t,e)}equals(t){return this===t||dt(t)&&(0,f.m)(this.sphere,t.sphere)}closestTo(t){const e=(0,v.Hh)();return(0,f.p)(this.sphere,t,e),e}get center(){return(0,f.a)(this.sphere)}get radius(){return this.sphere[3]}}class O extends E{constructor(t,e,n){super(),this.start=t,this.end=e,this.getZ=n,this.planeLike={start:(0,v.Xz)(t),end:(0,v.Xz)(e),type:y.pJ.PLANE}}equals(t){return this===t||pt(t)&&(0,a.p)(this.start,t.start)&&(0,a.p)(this.end,t.end)&&this.getZ===t.getZ}closestTo(t){return function(t,e){const n=(0,v.Hh)();return(0,y.r2)(e,t.planeLike,n),n[2]=t.getZ(n[0],n[1])??ft,n}(this,t)}addIfOnTheGround(t,e){for(const n of e){const e=this.getZ(n[0],n[1])??0;(0,y.Zj)(n[2],e)&&(n[2]=e,t.push(n))}}}class q extends E{constructor(t,e,n){super(),this._x=t,this._y=e,this._z=n}equals(t){return this===t||function(t){return t instanceof q}(t)&&this._x===t._x&&this._y===t._y&&this._z===t._z}closestTo(t){let[e,n,i]=t;return(0,v.vt)(this._x??e,this._y??n,this._z??i)}}class D extends E{constructor(t,e,n,i,r){super(),this._origin=t,this._spatialReference=e,this._distanceMeters=n,this._z=i,this._directionDegrees=r}equals(t){return this===t||function(t){return t instanceof D}(t)&&(0,s.t2)(this._origin,t._origin)&&this._spatialReference===t._spatialReference&&this._distanceMeters===t._distanceMeters&&this._z===t._z&&this._directionDegrees===t._directionDegrees}closestTo(t){let[e,n,i]=t;return(0,s.hZ)(V,e,n),(0,s.t2)(V,this._origin)||this._applyDirectionAndDistance(V),(0,v.vt)(V[0],V[1],this._z??i)}_applyDirectionAndDistance(t){if(null!=this._directionDegrees&&null!=this._distanceMeters)(0,d.vN)(t,this._origin,this._directionDegrees,this._distanceMeters,this._spatialReference);else if(null!=this._directionDegrees)!function(t,e,n,i,r){let{azimuth:s,distance:o}=(0,d._3)(X,e,i,r);s??=0;let a=o*Math.cos((s-n)*h.eh);a=Math.max(0,a),(0,d.vN)(t,e,n,a,r)}(t,this._origin,this._directionDegrees,t,this._spatialReference);else if(null!=this._distanceMeters){const{azimuth:e}=(0,d._3)(G,this._origin,t,this._spatialReference);(0,d.vN)(t,this._origin,e??0,this._distanceMeters,this._spatialReference)}}}const V=[0,0],G=new d.Zj;const X=new d.Zj;function B(t,e){if(rt(t)){const n=[];for(const i of t.constraints){const t=i.intersect(e);t&&n.push(t)}return it(n)}if(rt(e))return B(e,t);if(pt(t))return $(t,e);if(pt(e))return $(e,t);if(st(t)){const{point:n}=t;if(st(e))return(0,a.p)(n,e.point)?t:void 0;const i=e.closestTo(n);return(0,a.H)(i,n)?t:void 0}if(ot(t)){if(st(e))return B(e,t);if(ot(e))return et((0,y.SO)(t.lineLike,e.lineLike));if(at(e))return W(t,e);if(ct(e))return et((0,y.Mc)(e.planeLike,t.lineLike));if(lt(e))return et((0,y.K4)(t.lineLike,e.center,e.radius));if(ht(e))return et((0,y.IB)(t.lineLike,e));if(ut(e))return function(t,e){let{lineLike:n}=t,{center:i,radius:r}=e;const s=i[2];return et((0,y.K4)(n,i,r).filter((t=>(0,y.Zj)(t[2],s))))}(t,e);if(dt(e))return function(t,e){let{lineLike:n}=t,{sphere:i}=e;return et((0,f.n)(i,n.start,n.end))}(t,e)}else if(at(t)){if(st(e)||ot(e))return B(e,t);if(at(e))return function(t,e){return(0,y.Zj)(t.z,e.z)?t:void 0}(t,e);if(ct(e))return function(t,e){let{z:n}=t,{planeLike:i}=e;const[r,s]=i.start,[o,a]=i.end,c=(0,v.fA)(r,s,n),l=(0,v.fA)(o,a,n);return i.type===y.pJ.PLANE?new w(c,l):new S(c,l)}(t,e);if(lt(e))return function(t,e){const[n,i]=e.center;return new N((0,v.fA)(n,i,t.z),e.radius)}(t,e);if(ht(e))return Y(t,e);if(ut(e))return function(t,e){return(0,y.Zj)(e.center[2],t.z)?e:void 0}(t,e);if(dt(e))return function(t,e){let{center:n,radius:i}=e;const r=Math.abs(n[2]-t.z);if(r>i&&!(0,y.Zj)(r,i))return;const s=(0,v.fA)(n[0],n[1],t.z),o=Math.sqrt(i**2-r**2);return(0,y.Zj)(o,0)?void 0:new N(s,o)}(t,e)}else if(ct(t)){if(st(e)||ot(e)||at(e))return B(e,t);if(ct(e))return tt((0,y.b_)(t.planeLike,e.planeLike));if(lt(e))return tt((0,y.Bn)(t.planeLike,e.center,e.radius));if(ht(e))return Q(t,e);if(ut(e))return J(t,e);if(dt(e))return K(t,e)}else if(lt(t)){if(st(e)||ot(e)||at(e)||ct(e))return B(e,t);if(lt(e))return tt((0,y.t1)((0,v.Xz)(t.center),t.radius,(0,v.Xz)(e.center),e.radius));if(ht(e))return;if(ut(e))return function(t,e){const n=(0,s.hG)((0,v.Xz)(t.center),(0,v.Xz)(e.center));return(0,y.Zj)(n,0)&&(0,y.Zj)(t.radius,e.radius)?e:nt((0,y.t1)((0,v.Xz)(t.center),t.radius,(0,v.Xz)(e.center),e.radius),e.center[2])}(t,e);if(dt(e))return}else if(ht(t)){if(st(e)||ot(e)||at(e)||ct(e)||lt(e))return B(e,t);if(ht(e))return;if(ut(e))return void e.asCircle();if(dt(e))return}else if(ut(t)){if(st(e)||ot(e)||at(e)||ct(e)||lt(e)||ht(e))return B(e,t);if(ut(e))return function(t,e){if(!(0,y.HG)(t.center,e.center))return;const n=(0,s.hG)((0,v.Xz)(t.center),(0,v.Xz)(e.center));return(0,y.Zj)(n,0)&&(0,y.Zj)(t.radius,e.radius)?t:nt((0,y.t1)((0,v.Xz)(t.center),t.radius,(0,v.Xz)(e.center),e.radius),t.center[2])}(e,t);if(dt(e))return}else if(dt(t)){if(st(e)||ot(e)||at(e)||ct(e)||lt(e)||ut(e))return B(e,t);if(dt(e))return}}const W=(()=>{const t=(0,p.vt)();return(e,n)=>{const{start:i,end:r}=e;if((0,y.HG)(i,r)&&(0,y.Zj)(i[2],n.z))return e;const s=(0,v.Hh)();return(0,p.U5)(n.getPlane(t),i,r,s)?new m(s):void 0}})();const U=(()=>{const t=(0,u.vt)(),e=(0,c.vt)(),n=(0,c.vt)();return(i,s,o)=>{const{normal:u,center:h,radius:d}=s;(0,g.VV)(u,e,n);const f=(0,p.Qj)(i),_=d*(0,a.f)(f,e),E=d*(0,a.f)(f,n);(0,l.s)(t,h[0],h[1],h[2],1);const M=(0,l.h)(i,t),w=Math.hypot(_,E),S=(0,y.Zj)(w,0);if((0,y.Zj)((0,p.Io)(i,h),0)){if(S)return s;if((0,y.Zj)(d,0))return!o||(0,y.F2)(o,h)?new m((0,v.o8)(h)):void 0;(0,a.e)(e,f,u),(0,a.n)(e,e);const t=new Array,n=(0,c.o8)(h);(0,a.b)(n,n,e,d),o&&!(0,y.F2)(o,n)||t.push(n);const i=(0,c.o8)(h);return(0,a.b)(i,i,e,-d),o&&!(0,y.F2)(o,i)||t.push(i),et(t)}if(S)return;const b=-M/w;if(Math.abs(b)>1||(0,y.Zj)(b,1))return;const L=Math.atan(_/E),N=(0,r.YN)(b)-L,T=Math.PI-N,A=new Array,R=(0,c.vt)();(0,a.b)(R,h,e,d*Math.cos(N)),(0,a.b)(R,R,n,d*Math.sin(N)),A.push(R);const x=(0,c.vt)();return(0,a.b)(x,h,e,d*Math.cos(T)),(0,a.b)(x,x,n,d*Math.sin(T)),A.push(x),et(o?(0,y.UL)(o,A):A)}})();const Y=(()=>{const t=(0,p.vt)();return(e,n)=>U(e.getPlane(t),n,n.slicePlane)})();const J=(()=>{const t=(0,p.vt)();return(e,n)=>{let{center:i,radius:r}=n;const s=(0,y.Bn)(e.planeLike,i,r),o=i[2];e.getSlicePlane(t);const a=new Array;for(const[c,l]of s){const e=[c,l,o];(0,y.F2)(t,e)&&a.push(e)}return et(a)}})(),Q=(()=>{const t=(0,p.vt)(),e=(0,p.vt)();return(n,i)=>U(n.getPlane(t),i,n.getSlicePlane(e))})(),K=(()=>{const t=(0,p.vt)();return(e,n)=>{let{center:i,radius:r}=n;const s=e.getPlane(t),o=(0,p.mN)(s,i),l=Math.abs(o);if(l>r&&!(0,y.Zj)(l,r))return;const u=Math.sqrt(r**2-o**2);if((0,y.Zj)(u,0)){const t=(0,v.Hh)();return(0,p._I)(s,i,t),new m(t)}const h=(0,v.Hh)(),d=(0,c.o8)((0,p.Qj)(s));return(0,a.b)(h,i,d,o),new T(h,u,d,e.getSlicePlane())}})();function $(t,e){const{planeLike:n,getZ:i}=t,r=new Array;if(st(e))t.addIfOnTheGround(r,(0,y.VT)(n,e.point));else if(ot(e))t.addIfOnTheGround(r,(0,y.Mc)(n,e.lineLike));else if(lt(e))for(const[s,o]of(0,y.Bn)(n,e.center,e.radius)){const t=i(s,o);null!=t&&r.push((0,c.fA)(s,o,t))}else if(ct(e)||pt(e))for(const[s,o]of(0,y.b_)(n,e.planeLike)){const t=i(s,o)??ft;r.push((0,c.fA)(s,o,t))}return et(r)}function tt(t){return it(t.map((t=>{let[e,n]=t;const i=(0,v.fA)(e,n,0),r=(0,v.fA)(e,n,1);return new w(i,r)})))}function et(t){return it(t.map((t=>t?new m((0,v._7)(t)):void 0)))}function nt(t,e){return et(t.map((t=>{let[n,i]=t;return[n,i,e]})))}function it(t){if(0!==t.length)return 1===t.length?t[0]??void 0:new b(t.filter(i.Ru))}function rt(t){return t instanceof b}function st(t){return t instanceof m}function ot(t){return t instanceof M}function at(t){return t instanceof x}function ct(t){return t instanceof Z}function lt(t){return t instanceof L}function ut(t){return t instanceof N}function ht(t){return t instanceof T}function dt(t){return t instanceof F}function pt(t){return t instanceof O}const ft=0},23862:(t,e,n)=>{n.d(e,{Ex:()=>f,FH:()=>E,Hh:()=>c,Lp:()=>g,Xz:()=>u,_7:()=>l,de:()=>p,fA:()=>h,io:()=>y,o8:()=>d,vf:()=>v,vt:()=>a,xF:()=>_});var i,r=n(9392),s=n(18117),o=n(12482);function a(t,e,n){return c(t,e,n)}function c(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,r.fA)(t,e,n)}function l(t){return t}function u(t){return t}function h(t,e,n){return(0,r.fA)(t,e,n)}function d(t){const[e,n,i]=t;return t.length>3?[e,n,i,t[3]]:[e,n,i]}function p(t){return t[3]=((t.length>3?t[3]:void 0)??i.NONE)|i.TARGET,t}function f(t){return Boolean(((t.length>3?t[3]:void 0)??i.NONE)&i.TARGET)}function g(t,e,n,i){let{coordinateHelper:r,elevationInfo:s}=n;return t?v(r.vectorToDehydratedPoint(t,m),e,s,i):null}function v(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:c();return i[0]=t.x,i[1]=t.y,i[2]=t.z??0,null==e||("2d"===e.type?i[2]=0:i[2]=(0,o.wS)(e,t,n,o.qt)??0),i}function y(t,e,n){return n?((0,s.J)(n,t[0],t[1],t[2],e),n):(0,s.T)(t[0],t[1],t[2],e)}function _(t,e,n,i,r){let{z:a,m:c}=n;const{spatialReference:l,elevationInfo:u}=i;let h;h=null==a&&null==c?void 0:null==e||"2d"===e.type?a??void 0:(0,o.xS)(e,t,l,o.qt,u)??0;const[d,p]=t;return r?(0,s.J)(r,d,p,h,l):r=(0,s.T)(d,p,h,l),null!=c&&(r.m=c,r.hasM=!0),r}function E(t,e,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:c();const[a,l]=t;return s[0]=a,s[1]=l,t.length>3&&(s[3]=t[3]??i.NONE),"3d"!==n?.type?(s[2]=e.value,s):(s[2]=(0,o.Fo)(n,a,l,e.value,r,e.elevationInfo,o.qt)??0,s)}!function(t){t[t.NONE=0]="NONE",t[t.TARGET=1]="TARGET"}(i||(i={}));const m=(0,s.T)(0,0,0,null)},63078:(t,e,n)=>{n.d(e,{N:()=>u});var i=n(35143),r=n(69539),s=n(42553),o=n(46053),a=n(85842);let c=class extends s.oY{constructor(){super(...arguments),this.enabled=!0}};(0,i._)([(0,o.MZ)({type:Boolean})],c.prototype,"enabled",void 0),c=(0,i._)([(0,a.$)("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],c);let l=class extends s.oY{constructor(t){super(t),this.lineSnapper=new c,this.parallelLineSnapper=new c,this.rightAngleSnapper=new c,this.rightAngleTriangleSnapper=new c,this.shortLineThreshold=15,this.distance=5,this.pointThreshold=1e-6,this.intersectionParallelLineThreshold=1e-6,this.parallelLineThreshold=1e-6,this.verticalLineThresholdMeters=.3,this.touchSensitivityMultiplier=1.5,this.pointOnLineThreshold=1e-6,this.orange=new r.A([255,127,0]),this.orangeTransparent=new r.A([255,127,0,.5]),this.lineHintWidthReference=3,this.lineHintWidthTarget=3,this.lineHintFadedExtensions=.3,this.parallelLineHintWidth=2,this.parallelLineHintLength=24,this.parallelLineHintOffset=1.5,this.rightAngleHintSize=24,this.rightAngleHintOutlineSize=1.5,this.satisfiesConstraintScreenThreshold=1}};(0,i._)([(0,o.MZ)({type:c,constructOnly:!0,nonNullable:!0,json:{write:!0}})],l.prototype,"lineSnapper",void 0),(0,i._)([(0,o.MZ)({type:c,constructOnly:!0,nonNullable:!0,json:{write:!0}})],l.prototype,"parallelLineSnapper",void 0),(0,i._)([(0,o.MZ)({type:c,constructOnly:!0,nonNullable:!0,json:{write:!0}})],l.prototype,"rightAngleSnapper",void 0),(0,i._)([(0,o.MZ)({type:c,constructOnly:!0,nonNullable:!0,json:{write:!0}})],l.prototype,"rightAngleTriangleSnapper",void 0),(0,i._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],l.prototype,"shortLineThreshold",void 0),(0,i._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],l.prototype,"distance",void 0),(0,i._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],l.prototype,"pointThreshold",void 0),(0,i._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],l.prototype,"intersectionParallelLineThreshold",void 0),(0,i._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],l.prototype,"parallelLineThreshold",void 0),(0,i._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],l.prototype,"verticalLineThresholdMeters",void 0),(0,i._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],l.prototype,"touchSensitivityMultiplier",void 0),(0,i._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],l.prototype,"pointOnLineThreshold",void 0),(0,i._)([(0,o.MZ)({type:r.A,nonNullable:!0})],l.prototype,"orange",void 0),(0,i._)([(0,o.MZ)({type:r.A,nonNullable:!0})],l.prototype,"orangeTransparent",void 0),(0,i._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],l.prototype,"lineHintWidthReference",void 0),(0,i._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],l.prototype,"lineHintWidthTarget",void 0),(0,i._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],l.prototype,"lineHintFadedExtensions",void 0),(0,i._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],l.prototype,"parallelLineHintWidth",void 0),(0,i._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],l.prototype,"parallelLineHintLength",void 0),(0,i._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],l.prototype,"parallelLineHintOffset",void 0),(0,i._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],l.prototype,"rightAngleHintSize",void 0),(0,i._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],l.prototype,"rightAngleHintOutlineSize",void 0),(0,i._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],l.prototype,"satisfiesConstraintScreenThreshold",void 0),l=(0,i._)([(0,a.$)("esri.views.interactive.snapping.Settings.Defaults")],l);const u=new l},99791:(t,e,n)=>{var i;n.d(e,{n:()=>i}),function(t){t[t.FEATURE=1]="FEATURE",t[t.SELF=2]="SELF",t[t.ALL=3]="ALL"}(i||(i={}))},12818:(t,e,n)=>{n.d(e,{X:()=>G});var i=n(54901),r=n(77944),s=n(19276),o=n(68134),a=n(35143),c=n(91967),l=n(46053),u=(n(81806),n(76460)),h=(n(47249),n(85842));let d=class extends c.A{constructor(t){super(t),this.layer=null,this.enabled=!0,this.updating=!1,this.availability=1,this.sublayerSources=new s.A}};(0,a._)([(0,l.MZ)({constructOnly:!0})],d.prototype,"layer",void 0),(0,a._)([(0,l.MZ)()],d.prototype,"enabled",void 0),(0,a._)([(0,l.MZ)()],d.prototype,"updating",void 0),(0,a._)([(0,l.MZ)()],d.prototype,"availability",void 0),(0,a._)([(0,l.MZ)()],d.prototype,"sublayerSources",void 0),d=(0,a._)([(0,h.$)("esri.views.interactive.snapping.FeatureSnappingLayerSource")],d);const p=d;var f=n(63078),g=n(18690);let v=class extends c.A{constructor(t){super(t),this.enabled=!1,this.enabledToggled=!1,this.forceDisabled=!1,this.selfEnabled=!0,this.featureEnabled=!0,this.gridEnabled=!1,this.attributeRulesEnabled=!1,this.featureSources=new s.A,this.distance=f.N.distance,this.touchSensitivityMultiplier=f.N.touchSensitivityMultiplier}get effectiveEnabled(){return!this.forceDisabled&&(this.enabledToggled?!this.enabled:this.enabled)}get effectiveGridEnabled(){return this.effectiveEnabled&&this.gridEnabled}get effectiveSelfEnabled(){return this.effectiveEnabled&&this.selfEnabled}get effectiveFeatureEnabled(){return this.effectiveEnabled&&this.featureEnabled}get _effectiveFeatureSources(){const t=this.featureSources;t.some(_)&&u.A.getLogger(this).warnOnce("Do not configure SubtypeGroupLayer sources in SnappingOptions.featureSources directly. Create a FeatureSnappingLayerSource for each SubtypeSublayer.");const e=t.filter(m),n=this._get("_effectiveFeatureSources")?.filter(_)??new s.A;for(const s of e){const t=n.find((t=>t.layer===s.layer.parent));if(t)t.sublayerSources.includes(s)||t.sublayerSources.add(s);else if(s.layer.parent){const t=new p({layer:s.layer.parent});t.sublayerSources.add(s),n.add(t)}}for(const s of n){const t=s.sublayerSources.filter((t=>!e.includes(t)));s.sublayerSources.removeMany(t)}n.removeMany(n.filter((t=>0===t.sublayerSources.length)));const i=t.filter(E),r=this._get("_effectiveFeatureSources")??new s.A,{added:o,removed:a}=(0,g.iv)(r.toArray(),[...i,...n]);return r.removeMany(a),r.addMany(o),r}};(0,a._)([(0,l.MZ)()],v.prototype,"enabled",void 0),(0,a._)([(0,l.MZ)()],v.prototype,"enabledToggled",void 0),(0,a._)([(0,l.MZ)()],v.prototype,"forceDisabled",void 0),(0,a._)([(0,l.MZ)()],v.prototype,"selfEnabled",void 0),(0,a._)([(0,l.MZ)()],v.prototype,"featureEnabled",void 0),(0,a._)([(0,l.MZ)()],v.prototype,"gridEnabled",void 0),(0,a._)([(0,l.MZ)()],v.prototype,"attributeRulesEnabled",void 0),(0,a._)([(0,l.MZ)({type:s.A.ofType(p)})],v.prototype,"featureSources",void 0),(0,a._)([(0,l.MZ)()],v.prototype,"distance",void 0),(0,a._)([(0,l.MZ)()],v.prototype,"touchSensitivityMultiplier",void 0),(0,a._)([(0,l.MZ)({readOnly:!0})],v.prototype,"effectiveEnabled",null),(0,a._)([(0,l.MZ)({readOnly:!0})],v.prototype,"effectiveGridEnabled",null),(0,a._)([(0,l.MZ)({readOnly:!0})],v.prototype,"effectiveSelfEnabled",null),(0,a._)([(0,l.MZ)({readOnly:!0})],v.prototype,"effectiveFeatureEnabled",null),(0,a._)([(0,l.MZ)({readOnly:!0})],v.prototype,"_effectiveFeatureSources",null),v=(0,a._)([(0,h.$)("esri.views.interactive.snapping.SnappingOptions")],v);const y=v;function _(t){return"subtype-group"===t.layer.type}function E(t){return"subtype-group"!==t.layer.type}function m(t){return"subtype-sublayer"===t.layer.type}var M=n(98773),w=n(54099),S=n(50346),b=n(9624),L=n(12482),N=n(23862),T=n(99791),A=n(70330),R=n(80794),x=n(9876),P=n(90836),Z=n(45633),C=n(20612),z=n(78228),j=n(59380),k=n(17072);let H=class extends(w.A.EventedMixin(c.A)){constructor(t){super(t),this.options=new y,this._engineCache=new Map,this._loadTask=null,this._engines=[],this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=I.MAIN}initialize(){this.addHandles([(0,o.wB)((()=>{const{distance:t,touchSensitivityMultiplier:e,effectiveSelfEnabled:n,effectiveFeatureEnabled:i,effectiveGridEnabled:r}=this.options;return{selfEnabled:n,featureEnabled:i,gridEnabled:"2d"===this.view.type&&r,viewReady:this.view.ready,viewSpatialReference:this.view.spatialReference,distance:t,touchSensitivityMultiplier:e}}),((t,e)=>{e&&(this.doneSnapping(),this.emit("changed")),this._loadTask?.abort(),this._loadTask=(0,M.UT)((n=>this._updateEngines(t,e,n)))}),o.pc),(0,o.wB)((()=>this.options),(t=>{for(const e of this._engines)e.options=t}),o.OH)])}destroy(){this._destroyEngines()}get updating(){return this._engines.some((t=>t.updating))||!this._loadTask?.finished}_destroyEngines(){this._engineCache.forEach((t=>t.destroy())),this._engineCache.clear(),this._engines=[]}async _updateEngines(t,e,n){if(!t.viewReady)return void this._destroyEngines();e?.viewSpatialReference!==t.viewSpatialReference&&this._destroyEngines();const{_engineCache:i}=this,r=[];t.featureEnabled&&!i.has("feature")&&r.push(this._setupFeatureSnappingEngine(n)),t.selfEnabled&&!i.has("self")&&r.push(this._setupSelfSnappingEngine(n)),t.gridEnabled&&!i.has("grid")&&"2d"===this.view.type&&r.push(this._setupGridSnappingEngine(n)),await Promise.allSettled(r),n.aborted||(this._engines=Array.from(i.values()))}async _setupSelfSnappingEngine(t){const{SelfSnappingEngine:e}=await Promise.all([n.e(2612),n.e(8422)]).then(n.bind(n,67960));(0,S.Te)(t);const i=new e({view:this.view,options:this.options});this._engineCache.set("self",i)}async _setupGridSnappingEngine(t){const{view:e}=this,{GridSnappingEngine:i}=await n.e(5411).then(n.bind(n,35411));if((0,S.Te)(t),"2d"===e.type){const t=new i({view:e,options:this.options});this._engineCache.set("grid",t)}}async _setupFeatureSnappingEngine(t){const{FeatureSnappingEngine:e}=await n.e(2843).then(n.bind(n,12843));(0,S.Te)(t);const{view:i,options:r,_engineCache:s}=this,o=new e({view:i,options:r,spatialReference:i.spatialReference});s.set("feature",o)}get _squaredMouseProximityThreshold(){return this.options.distance*this.options.distance}get _squaredTouchProximityThreshold(){const{distance:t,touchSensitivityMultiplier:e}=this.options,n=t*e;return n*n}snap(t){return function(t){return null!=t.scenePoint}(t)?this._snapMultiPoint(t):this._snapSinglePoint(t)}update(t){const{point:e,context:n}=t;this._removeVisualization();const i=this._currentMainCandidate;if(null==i)return e;const r=this._selectUpdateInput(t);if(null==r)return e;const{spatialReference:s}=n,o=(0,b.project)(r,s);if(null==o)return e;const{view:a}=this,{elevationInfo:c,visualizer:l}=n,u=[],h=(0,N.vf)(o,a,c),d=i.constraint.closestTo(h);if(!this._arePointsWithinScreenThreshold(h,d,n)||!O(i,n.drawConstraints))return this._resetSnappingState(),e;i.targetPoint=(0,N.de)(d),u.push(...i.hints);for(const p of this._currentOtherActiveCandidates)O(p,n.drawConstraints)&&(p.targetPoint=(0,N.de)(d),u.push(...p.hints));return null!=l&&this.addHandles(l.draw(u,{spatialReference:s,elevationInfo:D(n),view:a,selfSnappingZ:n.selfSnappingZ}),F),(0,N.xF)(d,a,e,n)}doneSnapping(){this._removeVisualization(),this._resetSnappingState()}_selectUpdateInput(t){let{point:e,scenePoint:n}=t;switch(this._currentSnappedType){case I.MAIN:return e;case I.SCENE:return n}}_resetSnappingState(){this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=I.MAIN}_removeVisualization(){this.removeHandles(F)}async _snapSinglePoint(t){let{point:e,context:n,signal:i}=t;const{view:r}=this,{elevationInfo:s}=n,o=(0,N.vf)(e,r,s),a=await this._fetchCandidates(o,T.n.ALL,n,i);return this._createSnapResult(o,I.MAIN,a,r,e,n,i)}async _snapMultiPoint(t){let{point:e,scenePoint:n,context:i,signal:r}=t;const{view:s}=this,{coordinateHelper:o,elevationInfo:a,spatialReference:c}=i;await(0,b.initializeProjection)(n.spatialReference,c);const l=(0,b.project)(n,c),u=(0,N.vf)(l,s,a),h=await this._fetchCandidates(u,T.n.FEATURE,i,r);if(h.length>0){const t=await this._fetchCandidates(u,T.n.SELF,i,r);return this._createSnapResult(u,I.SCENE,[...h,...t],s,l,i,r)}const d=(0,N.vf)(e,s,a),p=await this._fetchCandidates(d,T.n.SELF,i,r);return this._createSnapResult(d,I.MAIN,p,s,{z:o.hasZ()&&e.hasZ?e.z??0:void 0,m:o.hasM()&&e.hasM?e.m??0:void 0},i,r)}async _fetchCandidates(t,e,n,i){return(await Promise.all(this._engines.map((r=>r.fetchCandidates(t,e,n,i))))).flat()}_createSnapResult(t,e,n,i,r,s,o){return{get valid(){return!(0,S.G4)(o)},apply:()=>{const{spatialReference:o}=s,{snappedPoint:a,hints:c}=this._processCandidates(t,e,n,s);return this._removeVisualization(),null!=s.visualizer&&this.addHandles(s.visualizer.draw(c,{spatialReference:o,elevationInfo:L.qt,view:i,selfSnappingZ:s.selfSnappingZ}),F),(0,N.xF)(a,i,r,s)}}}_processCandidates(t,e,n,i){if(n.length<1)return this.doneSnapping(),{snappedPoint:t,hints:[]};this._currentSnappedType!==e&&this._resetSnappingState(),(0,A.xX)(t,n);const r=this._currentMainCandidate;if(null!=r){const s=function(t,e){return t instanceof P.N?q(e,t.first)>=0&&q(e,t.second)>=0?0:-1:q(e,t)}(r,n);if(s>=0){if(!(n[s]instanceof P.N))return this._intersectWithOtherCandidates(s,n,t,e,i);if(this._arePointsWithinScreenThreshold(t,r.targetPoint,i))return this._updateSnappingCandidate(r,e,n,i)}}return this._intersectWithOtherCandidates(0,n,t,e,i)}_intersectWithOtherCandidates(t,e,n,i,r){const{coordinateHelper:s}=r,o=e[t],a=[];for(let c=0;c<e.length;++c){if(c===t)continue;const i=e[c],r=o.constraint.intersect(i.constraint);if(r)for(const t of r.closestPoints(o.targetPoint))a.push([new P.N((0,N.de)(t),o,i,i.isDraped),this._squaredScreenDistance(n,t,s)])}return a.length>0&&(a.sort(((t,e)=>t[1]-e[1])),a[0][1]<this._squaredPointProximityThreshold(r.pointer))?this._updateSnappingCandidate(a[0][0],i,e,r):O(o,r.drawConstraints)?this._updateSnappingCandidate(o,i,e,r):{snappedPoint:n,hints:[]}}_updateSnappingCandidate(t,e,n,i){this.doneSnapping(),this._currentMainCandidate=t,this._currentSnappedType=e;const r=this._currentMainCandidate.targetPoint,s=[];s.push(...t.hints);for(const o of n){if(t instanceof P.N){if(o.constraint.equals(t.first.constraint)||o.constraint.equals(t.second.constraint))continue}else if(o.constraint.equals(t.constraint))continue;const e=o.constraint.closestTo(r);this._squaredScreenDistance(e,r,i.coordinateHelper)<f.N.satisfiesConstraintScreenThreshold*f.N.satisfiesConstraintScreenThreshold&&(o.targetPoint=r,this._currentOtherActiveCandidates.push(o),s.push(...o.hints))}return{snappedPoint:r,hints:s}}_squaredPointProximityThreshold(t){return"touch"===t?this._squaredTouchProximityThreshold:this._squaredMouseProximityThreshold}_arePointsWithinScreenThreshold(t,e,n){return this._squaredScreenDistance(t,e,n.coordinateHelper)<this._squaredPointProximityThreshold(n.pointer)}_squaredScreenDistance(t,e,n){return(0,A.pM)(this._toScreen(t,n),this._toScreen(e,n))}_toScreen(t,e){return(0,k.j)(t,e.spatialReference,L.qt,this.view)}get test(){}};var I;(0,a._)([(0,l.MZ)({constructOnly:!0})],H.prototype,"view",void 0),(0,a._)([(0,l.MZ)()],H.prototype,"options",void 0),(0,a._)([(0,l.MZ)({readOnly:!0})],H.prototype,"updating",null),(0,a._)([(0,l.MZ)()],H.prototype,"_loadTask",void 0),(0,a._)([(0,l.MZ)()],H.prototype,"_engines",void 0),(0,a._)([(0,l.MZ)()],H.prototype,"_squaredMouseProximityThreshold",null),(0,a._)([(0,l.MZ)()],H.prototype,"_squaredTouchProximityThreshold",null),H=(0,a._)([(0,h.$)("esri.views.interactive.snapping.SnappingManager")],H),function(t){t[t.MAIN=0]="MAIN",t[t.SCENE=1]="SCENE"}(I||(I={}));const F="visualization-handle";function O(t,e){return!e||null==e.direction&&null==e.distance||!(t instanceof R.X||t instanceof x.z||t instanceof Z.o||t instanceof C.B||t instanceof j.R)&&(!(t instanceof z.HJ)||null==e.direction&&t.selfSnappingType===z._b.LastVertex)}function q(t,e){let n=-1;for(let i=0;i<t.length;++i)if(e.constraint.equals(t[i].constraint)){n=i;break}return n}function D(t){let{coordinateHelper:e,elevationInfo:n}=t;return e.hasZ()?L.qt:n}const V=new Map;function G(t){if(!V.has(t)){const e=function(t,e){const n=new y({enabled:!0,selfEnabled:!1,featureEnabled:!0,distance:e?.distance??f.N.distance,touchSensitivityMultiplier:e?.touchSensitivityMultiplier??f.N.touchSensitivityMultiplier});return{...(0,o.wB)((()=>t.map?.allLayers?.toArray()??[]),(t=>{n.featureSources=new s.A(t).map((t=>new p({layer:t})))}),o.pc),options:n}}(t,{distance:10}),n=function(t,e){return new H({view:t,options:e})}(t,e.options);V.set(t,{referenceCount:0,snappingManager:n,remove:()=>{e.remove(),n.destroy()}})}const e=V.get(t);e.referenceCount++;const n=(0,i.hA)((()=>function(t,e){e.referenceCount--,e.referenceCount>0||(0,r.d)((()=>{0===e.referenceCount&&(e.remove(),V.delete(t))}))}(t,e)));return{snappingManager:e.snappingManager,...n}}},80794:(t,e,n)=>{n.d(e,{X:()=>a});var i=n(75543),r=n(70330),s=n(61751),o=n(23543);class a extends s.w{constructor(t){super({...t,isDraped:!0,constraint:new i.en(t.edgeStart,t.edgeEnd,t.getGroundElevation)})}get hints(){return[new o.c(r.H3.REFERENCE,this.constraint.start,this.constraint.end,this.isDraped,this.domain)]}}},9876:(t,e,n)=>{n.d(e,{z:()=>a});var i=n(75543),r=n(70330),s=n(61751),o=n(23543);class a extends s.w{constructor(t){super({...t,constraint:new i.Mn(t.edgeStart,t.edgeEnd)})}get hints(){return[new o.c(r.H3.REFERENCE,this.constraint.start,this.constraint.end,this.isDraped,this.domain)]}}},61751:(t,e,n)=>{n.d(e,{w:()=>s});var i=n(99791),r=n(30003);class s extends r.C{constructor(t){let{targetPoint:e,objectId:n,constraint:r,isDraped:s}=t;super(e,r,s,i.n.FEATURE),this.objectId=n}}},90836:(t,e,n)=>{n.d(e,{N:()=>a});var i=n(75543),r=n(99791),s=n(30003),o=n(30484);class a extends s.C{constructor(t,e,n,s){super(t,new i.i7(t),s,r.n.ALL),this.first=e,this.second=n}get hints(){return this.first.targetPoint=this.targetPoint,this.second.targetPoint=this.targetPoint,[...this.first.hints,...this.second.hints,new o.v(this.targetPoint,this.isDraped,this.domain)]}}},45633:(t,e,n)=>{n.d(e,{o:()=>c});var i=n(75543),r=n(99791),s=n(70330),o=n(30003),a=n(23543);class c extends o.C{constructor(t){let{lineStart:e,lineEnd:n,targetPoint:o,isDraped:c}=t;super(o,new i.WG(e,n),c,r.n.SELF),this._referenceLineHint=new a.c(s.H3.REFERENCE_EXTENSION,e,n,c,this.domain)}get hints(){return[this._referenceLineHint,new a.c(s.H3.TARGET,this._lineEndClosestToTarget(),this.targetPoint,this.isDraped,this.domain)]}_lineEndClosestToTarget(){return this.constraint.closestEndTo(this.targetPoint)}}},20612:(t,e,n)=>{n.d(e,{B:()=>d});var i=n(20664),r=n(9392),s=n(75543),o=n(23862),a=n(99791),c=n(70330),l=n(30003),u=n(23543),h=n(20578);class d extends l.C{constructor(t){let{referenceLine:e,lineStart:n,targetPoint:c,isDraped:l}=t;const u=(0,r.o8)(n),{left:h,right:d}=e;(0,i.d)(u,(0,i.g)(u,u,d),h),super(c,new s.WG(n,(0,o._7)(u)),l,a.n.SELF),this._referenceLines=[{edge:e,fadeLeft:!0,fadeRight:!0}]}get hints(){return[new u.c(c.H3.TARGET,this.constraint.start,this.targetPoint,this.isDraped,this.domain),new h.r(this.constraint.start,this.targetPoint,this.isDraped,this.domain),...this._referenceLines.map((t=>new u.c(c.H3.REFERENCE,t.edge.left,t.edge.right,this.isDraped,this.domain,t.fadeLeft,t.fadeRight)))]}addReferenceLine(t){const e={edge:t,fadeLeft:!0,fadeRight:!0};this._referenceLines.forEach((n=>{(0,i.p)(t.right,n.edge.left)&&(n.fadeLeft=!1,e.fadeRight=!1),(0,i.p)(t.right,n.edge.right)&&(n.fadeRight=!1,e.fadeRight=!1),(0,i.p)(t.left,n.edge.right)&&(n.fadeRight=!1,e.fadeLeft=!1),(0,i.p)(t.left,n.edge.left)&&(n.fadeLeft=!1,e.fadeLeft=!1)})),this._referenceLines.push(e)}}},78228:(t,e,n)=>{n.d(e,{HJ:()=>u,_b:()=>r,pn:()=>i});var i,r,s=n(99791),o=n(70330),a=n(30003),c=n(23543),l=n(56572);class u extends a.C{constructor(t){let{targetPoint:e,constraint:n,previousVertex:i,otherVertex:o,otherVertexType:a,isDraped:c,selfSnappingType:l,objectId:u,domain:h}=t;super(e,n,c,h??s.n.SELF),this.previousVertex=i,this.otherVertex=o,this.otherVertexType=a,this.selfSnappingType=l??r.None,this.objectId=u??null}get hints(){const t=this.previousVertex,e=this.otherVertexType===i.CENTER?this.otherVertex:this.targetPoint,n=this.otherVertexType===i.CENTER?this.targetPoint:this.otherVertex;return[new c.c(o.H3.TARGET,e,n,this.isDraped,this.domain),new c.c(o.H3.REFERENCE,t,e,this.isDraped,this.domain),new l.l(this.previousVertex,e,n,this.isDraped,this.domain)]}}!function(t){t[t.NEXT=0]="NEXT",t[t.CENTER=1]="CENTER"}(i||(i={})),function(t){t[t.None=0]="None",t[t.LastVertex=1]="LastVertex",t[t.FirstVertex=2]="FirstVertex",t[t.ExistingEdge=3]="ExistingEdge"}(r||(r={}))},59380:(t,e,n)=>{n.d(e,{R:()=>p});var i=n(19555),r=n(20664),s=n(9392),o=n(75543),a=n(23862),c=n(99791),l=n(70330),u=n(30003),h=n(23543),d=n(56572);class p extends u.C{constructor(t){let{targetPoint:e,point1:n,point2:l,isDraped:u}=t;super(e,new o.ej((0,a._7)((0,r.m)((0,s.vt)(),n,l,.5)),.5*(0,i.Io)((0,a.Xz)(n),(0,a.Xz)(l))),u,c.n.SELF),this._p1=n,this._p2=l}get hints(){return[new h.c(l.H3.REFERENCE,this.targetPoint,this._p1,this.isDraped,this.domain),new h.c(l.H3.REFERENCE,this.targetPoint,this._p2,this.isDraped,this.domain),new d.l(this._p1,this.targetPoint,this._p2,this.isDraped,this.domain)]}}},30003:(t,e,n)=>{n.d(e,{C:()=>i});class i{constructor(t,e,n,i){this.targetPoint=t,this.constraint=e,this.isDraped=n,this.domain=i}}},30484:(t,e,n)=>{n.d(e,{v:()=>o});var i=n(20664),r=n(99791),s=n(64753);class o extends s.m{constructor(t,e){super(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.n.ALL),this.intersectionPoint=t}equals(t){return t instanceof o&&(0,i.p)(this.intersectionPoint,t.intersectionPoint)}}},23543:(t,e,n)=>{n.d(e,{c:()=>o});n(81806),n(76460);var i=n(20664),r=n(99791),s=n(64753);class o extends s.m{constructor(t,e,n,i){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:r.n.ALL,o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];super(i,s),this.type=t,this.lineStart=e,this.lineEnd=n,this.fadeLeft=o,this.fadeRight=a}equals(t){return t instanceof o&&this.type===t.type&&(0,i.p)(this.lineStart,t.lineStart)&&(0,i.p)(this.lineEnd,t.lineEnd)&&this.fadeLeft===t.fadeLeft&&this.fadeRight===t.fadeRight}get length(){return(0,i.j)(this.lineStart,this.lineEnd)}}},20578:(t,e,n)=>{n.d(e,{r:()=>o});n(81806),n(76460);var i=n(20664),r=n(99791),s=n(64753);class o extends s.m{constructor(t,e,n){super(n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.n.ALL),this.lineStart=t,this.lineEnd=e}equals(t){return t instanceof o&&(0,i.p)(this.lineStart,t.lineStart)&&(0,i.p)(this.lineEnd,t.lineEnd)}}},56572:(t,e,n)=>{n.d(e,{l:()=>o});n(81806),n(76460);var i=n(20664),r=n(99791),s=n(64753);class o extends s.m{constructor(t,e,n,i){super(i,arguments.length>4&&void 0!==arguments[4]?arguments[4]:r.n.ALL),this.previousVertex=t,this.centerVertex=e,this.nextVertex=n}equals(t){return t instanceof o&&(0,i.p)(this.previousVertex,t.previousVertex)&&(0,i.p)(this.centerVertex,t.centerVertex)&&(0,i.p)(this.nextVertex,t.nextVertex)}}},64753:(t,e,n)=>{n.d(e,{m:()=>i});class i{constructor(t,e){this.isDraped=t,this.domain=e}}},70330:(t,e,n)=>{n.d(e,{BY:()=>S,H3:()=>_,HN:()=>M,Mo:()=>v,Tu:()=>b,io:()=>f,is:()=>m,nf:()=>E,pM:()=>g,xX:()=>y});var i=n(68134),r=n(41289),s=n(34154),o=n(18288),a=n(20664),c=n(18117),l=n(97015),u=n(57308),h=n(82307),d=n(23862),p=n(2515);const f=Symbol("grid-placement-graphic");function g(t,e){const n=t.x-e.x,i=t.y-e.y;return n*n+i*i}function v(t,e){return Math.sqrt(g(t,e))}function y(t,e){e.sort(((e,n)=>(0,a.s)(e.targetPoint,t)-(0,a.s)(n.targetPoint,t)))}var _;function E(t,e,n){let{point:i,distance:a,returnEdge:u,vertexMode:h,coordinateHelper:{spatialReference:d},filter:p}=t;return n=null!=n?n.clone():new l.A({where:"1=1"}),p&&(n.geometry=p.geometry,n.distance=p.distance,n.spatialRelationship=p.spatialRelationship,n.where=(0,s.m)(n.where,p.where),n.timeExtent=(0,o.pJ)(n.timeExtent,p.timeExtent),n.objectIds=function(t,e){return t||e?e?t?Array.from((0,r.E$)(new Set(t),new Set(e))):e:t:null}(n.objectIds,p.objectIds)),{point:(0,c.T)(i[0],i[1],i[2],d.toJSON()),mode:e,distance:a,returnEdge:u,vertexMode:h,query:n.toJSON()}}function m(t,e,n){return{left:(0,d.Lp)(t.leftVertex.pos,e,n),right:(0,d.Lp)(t.rightVertex.pos,e,n)}}function M(t){return t.createQuery()}!function(t){t[t.TARGET=0]="TARGET",t[t.REFERENCE=1]="REFERENCE",t[t.REFERENCE_EXTENSION=2]="REFERENCE_EXTENSION"}(_||(_={}));const w=Symbol("snapping-toggle");function S(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};const n=(0,i.wB)((()=>({view:t.view,snappingOptions:t.snappingOptions})),(n=>{let{view:i,snappingOptions:r}=n;if(t.removeHandles(w),!i||!r)return;const s=u.o.TOOL,o=[i.on("key-down",(t=>{t.key!==h.fn.toggle||t.repeat||(r.enabledToggled=!0,e())}),s),i.on("key-up",(t=>{t.key===h.fn.toggle&&(r.enabledToggled=!1,e())}),s),i.on("pointer-move",(t=>{const n=t.native.ctrlKey;r.enabledToggled!==n&&(r.enabledToggled=n,e())}),s)];t.addHandles(o,w)}),i.pc);t.addHandles(n)}function b(t){return(0,p.r)(t)&&"utilityNetworks"in t&&!!t.utilityNetworks?.length}},17072:(t,e,n)=>{n.d(e,{j:()=>a});var i=n(76931),r=n(9392),s=n(18117),o=n(4244);function a(t,e,n,r){return"2d"===r.type?(c.x=t[0],c.y=t[1],c.spatialReference=e,r.toScreen(c)):((0,o.X)(t,e,n,r,l),r.state.camera.projectToScreen(l,u),(0,i.tc)(u[0],u[1]))}const c=(0,s.T)(0,0,0,null),l=(0,r.vt)(),u=(0,i.gs)()},74050:(t,e,n)=>{n.d(e,{Dh:()=>c,IB:()=>u,Vv:()=>i,fg:()=>a,jI:()=>l});n(15941);var i,r=n(19555),s=n(72745);function o(t,e){return t[0]*e[1]-t[1]*e[0]}function a(t,e,n,i){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n;return(0,r.Re)(d,i,n),(0,r.Re)(f,e,s),function(t,e,n){const i=(0,r.Om)(n,e)/(0,r.m3)(n);(0,r.hs)(t,n,i)}(g,f,d),(0,r.WQ)(t,s,g)}function c(t,e,n,i){(0,r.Re)(d,e,n);const s=i/(0,r.Bw)(d);return(0,r.Ln)(t,n,d,s)}function l(t,e){const n=t.start,s=t.end,a=e.start,c=e.end,l=(0,r.Re)(d,s,n),u=(0,r.Re)(p,c,a),v=o(l,u);if(Math.abs(v)<=h)return[];const y=(0,r.Re)(f,n,a),_=o(u,y)/v,E=o(l,y)/v;if(_>=0){if(E>=0||e.type===i.LINE)return[(0,r.Ln)(g,n,l,_)]}else if(t.type===i.LINE&&(E>=0||e.type===i.LINE))return[(0,r.Ln)(g,n,l,_)];return[]}function u(t,e,n){const s=[],o=(0,r.Re)(d,t.end,t.start),a=(0,r.Re)(p,t.start,e),c=(0,r.m3)(o),l=2*(0,r.Om)(o,a),u=l*l-4*c*((0,r.m3)(a)-n*n);if(0===u){const e=-l/(2*c);(t.type===i.LINE||e>=0)&&s.push((0,r.Ln)(g,t.start,o,e))}else if(u>0){const e=Math.sqrt(u),n=(-l+e)/(2*c);(t.type===i.LINE||n>=0)&&s.push((0,r.Ln)(g,t.start,o,n));const a=(-l-e)/(2*c);(t.type===i.LINE||a>=0)&&s.push((0,r.Ln)(f,t.start,o,a))}return s}!function(t){t[t.RAY=0]="RAY",t[t.LINE=1]="LINE"}(i||(i={}));const h=1e-6,d=(0,s.vt)(),p=(0,s.vt)(),f=(0,s.vt)(),g=(0,s.vt)()},79337:(t,e,n)=>{n.d(e,{Bn:()=>d,F2:()=>T,HG:()=>b,IB:()=>E,K4:()=>m,Mc:()=>p,Nm:()=>y,SO:()=>M,UL:()=>N,VT:()=>f,Yv:()=>_,Zj:()=>L,b_:()=>g,pJ:()=>A,r2:()=>v,t1:()=>w});var i=n(15941),r=n(19555),s=n(72745),o=n(20664),a=n(9392),c=n(53494),l=n(13927),u=n(94966),h=n(74050);function d(t,e,n){let{start:i,end:o,type:a}=t;const c=[],l=(0,r.Re)(x,o,i),u=(0,r.Re)(P,i,e),h=(0,r.m3)(l),d=2*(0,r.Om)(l,u),p=d*d-4*h*((0,r.m3)(u)-n*n);if(0===p){const t=-d/(2*h);(a===A.PLANE||t>=0)&&c.push((0,r.Ln)((0,s.vt)(),i,l,t))}else if(p>0){const t=Math.sqrt(p),e=(-d+t)/(2*h);(a===A.PLANE||e>=0)&&c.push((0,r.Ln)((0,s.vt)(),i,l,e));const n=(-d-t)/(2*h);(a===A.PLANE||n>=0)&&c.push((0,r.Ln)((0,s.vt)(),i,l,n))}return c}function p(t,e){const n=t.start,i=t.end,s=(0,r.Re)(x,i,n),l=(0,o.i)(C,-s[1],s[0],0),u=e.start,d=e.end,p=(0,o.a)(z,d,u),f=(0,o.f)(p,l),g=(0,o.i)(j,n[0],n[1],0),v=(0,o.a)(k,g,u),y=(0,o.f)(v,l),_=(0,c.FD)();if(Math.abs(f)<_)return Math.abs(y),[];const E=(0,o.b)(H,u,p,y/f);if(e.type===h.Vv.RAY){const t=(0,o.a)(I,E,u);if((0,o.f)(t,p)<-_)return[]}if(t.type===A.HALF_PLANE){const t=(0,r.jb)(P,E,n);if((0,r.Om)(t,s)<-_)return[]}return[(0,a.o8)(E)]}function f(t,e){return function(t,e){let{start:n,end:i,type:r}=t;const s=(0,o.a)(Z,e,n),l=(0,o.a)(C,i,n),u=(0,o.e)(z,l,s),d=(0,o.z)(u)/(0,o.z)(l),p=(0,c.FD)();if(d<p)switch(r){case h.Vv.LINE:return[(0,a.o8)(e)];case h.Vv.RAY:return(0,o.f)(l,s)<-p?[]:[(0,a.o8)(e)]}return[]}(S(O,e[2],t),e)}function g(t,e){return M(S(O,0,t),S(q,0,e)).map((t=>{let[e,n]=t;return(0,s.fA)(e,n)}))}function v(t,e,n){return _(t,S(O,t[2],e),n)}function y(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(0,a.vt)();const s=(0,r.Re)(x,t,e),o=(0,r.Bw)(s);return(0,r.Ln)(i,e,s,0===o?1:n/o),i[2]=t[2],i}function _(t,e){let{start:n,end:i,type:r}=e,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,a.vt)();const c=(0,o.a)(Z,t,n),l=(0,o.a)(C,i,n),u=(0,o.f)(c,l)/(0,o.f)(l,l);return(0,o.b)(s,n,l,r===h.Vv.RAY?Math.max(u,0):u)}const E=(()=>{const t=(0,a.vt)(),e=(0,a.vt)(),n=(0,a.vt)();return(i,c)=>{let{start:d,end:p}=i,{center:f,radius:g,normal:v,slicePlane:y}=c;const _=(0,l.O_)(f,v,F);if(L((0,l.Io)(_,d),0)&&L((0,l.Io)(_,p),0)){(0,u.VV)(v,t,e);const i=(i,s)=>((0,o.d)(n,s,f),(0,r.hZ)(i,(0,o.f)(n,t),(0,o.f)(n,e)),i),c=(0,h.IB)({start:i(x,d),end:i(P,p),type:h.Vv.LINE},s.uY,g),l=[];for(const[n,r]of c){const i=(0,o.c)((0,a.vt)(),f);(0,o.b)(i,i,t,n),(0,o.b)(i,i,e,r),y&&!T(y,i)||l.push(i)}return l}const E=(0,a.vt)();return(0,l.U5)(_,d,p,E)?!L((0,o.j)(E,f),g)||y&&!T(y,E)?[]:[E]:[]}})();function m(t,e,n){let{start:i,end:s,type:c}=t;const l=[],u=(0,o.d)(Z,s,i),d=(0,r.Re)(P,i,e),p=(0,r.m3)(u),f=2*(0,r.Om)(u,d),g=f*f-4*p*((0,r.m3)(d)-n*n);if(0===g){const t=-f/(2*p);(c===h.Vv.LINE||t>=0)&&l.push((0,o.b)((0,a.vt)(),i,u,t))}else if(g>0){const t=Math.sqrt(g),e=(-f+t)/(2*p);(c===h.Vv.LINE||e>=0)&&l.push((0,o.b)((0,a.vt)(),i,u,e));const n=(-f-t)/(2*p);(c===h.Vv.LINE||n>=0)&&l.push((0,o.b)((0,a.vt)(),i,u,n))}return l}function M(t,e){const n=t.start,i=t.end,r=e.start,s=e.end,l=(0,o.a)(Z,i,n),u=(0,o.a)(C,s,r),d=(0,o.a)(z,r,n),p=(0,o.e)(j,l,u);if(!L((0,o.f)(d,p),0))return[];const f=(0,o.z)(p);if(L(f,0))return[];const g=(0,o.e)(k,d,u),v=(0,o.f)(g,p)/f,y=(0,o.b)(H,n,l,v);if(t.type===h.Vv.RAY){const t=(0,o.a)(I,y,n);if((0,o.f)(l,t)<-(0,c.FD)())return[]}if(e.type===h.Vv.RAY){const t=(0,o.a)(I,y,r);if((0,o.f)(u,t)<-(0,c.FD)())return[]}return[(0,a.o8)(y)]}function w(t,e,n,i){const[o,a]=t,[c,l]=n,u=c-o,h=l-a,d=u*u+h*h,p=Math.sqrt(d);if(p>e+i)return[];if(p<Math.abs(e-i))return[];if(L(p,0)&&L(e,i))return[];const f=(e*e-i*i+d)/(2*p),g=Math.sqrt(e*e-f*f),v=g*h/p,y=g*u/p,[_,E]=(0,r.Cc)(x,t,n,f/p);return L(v,y)?[(0,s.fA)(_,E)]:[(0,s.fA)(_+v,E-y),(0,s.fA)(_-v,E+y)]}function S(t,e,n){let{start:i,end:r,type:s}=n;return(0,o.i)(t.start,i[0],i[1],e),(0,o.i)(t.end,r[0],r[1],e),t.type=R[s],t}function b(t,e){return L(t[2],e[2])}function L(t,e){return(0,i.Sp)(Math.abs(t-e),0,(0,c.FD)())}function N(t,e){return e.filter((e=>T(t,e)))}function T(t,e){return(0,l.Tj)(t,e)}var A;!function(t){t[t.PLANE=0]="PLANE",t[t.HALF_PLANE=1]="HALF_PLANE"}(A||(A={}));const R={[A.PLANE]:h.Vv.LINE,[A.HALF_PLANE]:h.Vv.RAY},x=(0,s.vt)(),P=(0,s.vt)(),Z=(0,a.vt)(),C=(0,a.vt)(),z=(0,a.vt)(),j=(0,a.vt)(),k=(0,a.vt)(),H=(0,a.vt)(),I=(0,a.vt)(),F=(0,l.vt)(),O={start:(0,a.vt)(),end:(0,a.vt)(),type:h.Vv.LINE},q={start:(0,a.vt)(),end:(0,a.vt)(),type:h.Vv.LINE}},2515:(t,e,n)=>{n.d(e,{r:()=>s});var i=n(19898);class r extends i.R{constructor(t,e){super(t,e,"webmap")}}function s(t){return null!=t&&"object"==typeof t&&"declaredClass"in t&&"esri.WebMap"===t.declaredClass}new r(2,32)}}]);
//# sourceMappingURL=2818.f9d041e3.chunk.js.map